<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<title></title>
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	<link rel="stylesheet" type="text/css" href="../css/blog_index.css">

	<link type="text/css" rel="stylesheet" href="../css/shCoreEclipse.css"/>
</head>
<body scroll="no">
	<header>
		<nav>
			<ul class="title clear">
				<a href="../index.html">
					<li>华益峰</li>
				</a>
				<a href="index.html">
					<li>博客</li>
				</a>
				<a href="">
					<li>微博</li>
				</a>
				<a href="">
					<li>github</li>
				</a>
				<a href="">
					<li>知乎</li>
				</a>
			</ul>
		</nav>
	</header>
	<section>
		<div class="list one">
			<div class="header">
				<h1>
					关于jsp与前端ajax交互,报错erorr
				</h1>
			</div>
			<div class="type clear">
				<span class="span_button">
					js
				</span>
				<span class="span_button">
					css
				</span>
				<span class="span_button">
					文章
				</span>
				<span class="span_button">
					分享
				</span>
			</div>
			<div class="content">
				<div>
				在一次项目中，我与后端交互是，用ajax提交，但是后台一直没返回任何数据，一直执行ajax的error
				
				函数，一开始以为是后台的的原因，于是后台尝试了各种调试，网上有人说可能是返回json格式有问
				
				题。jquery的ajax比较严格，返回的json必须以｛"abc":"abc"｝,这种格式，如果数据为空，也要执
				
				行data:"{}"，但是我尝试了，并没有解决这个问题。后来捣腾了一阵子，XMLHttpRequest返回值为20
				
				0，但是textStatus返回为0，我又想是不是缓存的原因，后来我把缓存清了，结果执行了success函数
				
				，但是后来再一次尝试又执行error函数了。于是我决定加了一个时间戳。
				</div>
				<pre class="brush: js;">
					$.ajax({
						url:url,
						type:'post',
						dataType:'json',
						data:{
							data:new Date(),
							email:$('#name').val(),
							pwd:$("#pwd").val(),
							pwd2:$("#pwd2").val(),
							number:$("#number").val(),
							hoby:a.join("&"),
							check:$("#checked").val()
						},
						success:function(obj){
							//alert("11");
							//alert(obj.data);
						},
						error:function(errorMsg){
							//alert("22");
							//alert(errorMsg);
						}
					});
				</pre>
				<br>
				最后神奇的一幕发生了，再也不会执行error函数了。哈哈哈哈！！！
			</div>
			<!-- <div class="timer">
				<div class="timer_top">
					<span>10</span>
					天
				</div>
				之前
			</div> -->
			<div class="timer">
				2016-9-27
			</div>
			<div class="view-cnt">（111 人已阅）</div>
		</div>
		
	</section>
<script type="text/javascript" src="../js/shCore.js"></script>
<script type="text/javascript" src="../js/shBrushJScript.js"></script>
<script type="text/javascript">SyntaxHighlighter.all();</script>
</body>
</html>